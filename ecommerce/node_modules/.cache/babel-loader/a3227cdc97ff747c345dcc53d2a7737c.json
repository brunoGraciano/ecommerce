{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\bruno\\\\Desktop\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport * as actionTypes from \"./actionTypes\";\nimport axios from \"axios\";\nexport var updateProductOrderQuantity = function updateProductOrderQuantity(inputValue, productId, products) {\n  var productsState;\n  var productsLs = localStorage.getItem(\"product\").split(\",\");\n  var quantityLs = localStorage.getItem(\"quantity\").split(\",\");\n  var index = productsLs.indexOf(productId);\n\n  if (quantityLs[index] < 1) {\n    quantityLs.splice(index, 1);\n    productsLs.splice(index, 1);\n    localStorage.setItem(\"quantity\", quantityLs);\n    localStorage.setItem(\"product\", productsLs);\n    productsState = products.filter(function (p) {\n      return p !== productId;\n    });\n    console.log(productsState);\n  } else {\n    quantityLs[index] = inputValue;\n    localStorage.setItem(\"quantity\", quantityLs);\n    productsState = _toConsumableArray(products);\n\n    for (var p = 0; p < products.length; p++) {\n      if (productsState[p].id === productId) {\n        productsState[p].quantityCart = inputValue;\n      }\n    }\n  }\n\n  return {\n    type: actionTypes.UPDATE_PRODUCT_ORDER_QUANTITY,\n    products: productsState,\n    total: calculateTotal(quantityLs)\n  };\n};\nexport var addProductOrder = function addProductOrder(productId) {\n  var products = localStorage.getItem(\"product\");\n  var quantity = localStorage.getItem(\"quantity\");\n  var arrProducts = [];\n  var arrQuantity = [];\n\n  if (products !== null && products !== \"\") {\n    arrProducts = products.split(\",\");\n    arrQuantity = quantity.split(\",\");\n\n    if (arrProducts.indexOf(productId) === -1) {\n      arrProducts.push(productId);\n      arrQuantity.push(1);\n    } else {\n      var indexOfProduct = arrProducts.indexOf(productId);\n      var prevQuantity = parseInt(arrQuantity[indexOfProduct], 10) + 1;\n      arrQuantity[indexOfProduct] = prevQuantity;\n    }\n  } else {\n    arrProducts = [productId];\n    arrQuantity = [1];\n  }\n\n  localStorage.setItem(\"product\", arrProducts);\n  localStorage.setItem(\"quantity\", arrQuantity);\n  return {\n    type: actionTypes.ADD_PRODUCT_ORDER,\n    products: arrProducts,\n    total: calculateTotal(arrQuantity)\n  };\n};\nexport var fetchProductOrder = function fetchProductOrder() {\n  return function (dispatch) {\n    if (localStorage.getItem(\"product\") !== null) {\n      var products = localStorage.getItem(\"product\").split(\",\");\n      axios({\n        method: \"post\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        data: products,\n        url: \"http://localhost:8086/products/arr\"\n      }).then(function (res) {\n        var quantityLs = localStorage.getItem(\"quantity\").split(\",\");\n\n        var productsState = _toConsumableArray(res.data);\n\n        for (var p = 0; p < productsState.length; p++) {\n          productsState[p].quantityCart = quantityLs[p];\n        }\n\n        dispatch({\n          type: actionTypes.FETCH_PRODUCT_ORDER,\n          products: productsState,\n          total: calculateTotal(quantityLs)\n        });\n      });\n    }\n  };\n};\n\nvar calculateTotal = function calculateTotal(arrQuantity) {\n  var total = 0;\n\n  for (var q = 0; q < arrQuantity.length; q++) {\n    total += parseInt(arrQuantity[q], 10);\n  }\n\n  return total;\n};","map":{"version":3,"sources":["C:\\Users\\bruno\\desktop\\ecommerce\\src\\store\\actions\\orderAction.js"],"names":["actionTypes","axios","updateProductOrderQuantity","inputValue","productId","products","productsState","productsLs","localStorage","getItem","split","quantityLs","index","indexOf","splice","setItem","filter","p","console","log","length","id","quantityCart","type","UPDATE_PRODUCT_ORDER_QUANTITY","total","calculateTotal","addProductOrder","quantity","arrProducts","arrQuantity","push","indexOfProduct","prevQuantity","parseInt","ADD_PRODUCT_ORDER","fetchProductOrder","dispatch","method","headers","data","url","then","res","FETCH_PRODUCT_ORDER","q"],"mappings":"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","sourcesContent":["import * as actionTypes from \"./actionTypes\";\r\nimport axios from \"axios\";\r\n\r\nexport const updateProductOrderQuantity = (inputValue, productId, products) => {\r\n  let productsState;\r\n  let productsLs = localStorage.getItem(\"product\").split(\",\");\r\n  let quantityLs = localStorage.getItem(\"quantity\").split(\",\");\r\n  const index = productsLs.indexOf(productId);\r\n  if (quantityLs[index] < 1) {\r\n    quantityLs.splice(index, 1);\r\n    productsLs.splice(index, 1);\r\n    localStorage.setItem(\"quantity\", quantityLs);\r\n    localStorage.setItem(\"product\", productsLs);\r\n    productsState = products.filter(p => p !== productId);\r\n    console.log(productsState);\r\n    \r\n  } else {\r\n    quantityLs[index] = inputValue;\r\n    localStorage.setItem(\"quantity\", quantityLs);\r\n    productsState = [...products];\r\n    for (let p = 0; p < products.length; p++) {\r\n      if (productsState[p].id === productId) {\r\n        productsState[p].quantityCart = inputValue;\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    type: actionTypes.UPDATE_PRODUCT_ORDER_QUANTITY,\r\n    products: productsState,\r\n    total: calculateTotal(quantityLs)\r\n  };\r\n};\r\n\r\nexport const addProductOrder = productId => {\r\n  let products = localStorage.getItem(\"product\");\r\n  let quantity = localStorage.getItem(\"quantity\");\r\n  let arrProducts = [];\r\n  let arrQuantity = [];\r\n  if (products !== null && products !== \"\") {\r\n    arrProducts = products.split(\",\");\r\n    arrQuantity = quantity.split(\",\");\r\n    if (arrProducts.indexOf(productId) === -1) {\r\n      arrProducts.push(productId);\r\n      arrQuantity.push(1);\r\n    } else {\r\n      const indexOfProduct = arrProducts.indexOf(productId);\r\n      let prevQuantity = parseInt(arrQuantity[indexOfProduct], 10) + 1;\r\n      arrQuantity[indexOfProduct] = prevQuantity;\r\n    }\r\n  } else {\r\n    arrProducts = [productId];\r\n    arrQuantity = [1];\r\n  }\r\n  localStorage.setItem(\"product\", arrProducts);\r\n  localStorage.setItem(\"quantity\", arrQuantity);\r\n  return {\r\n    type: actionTypes.ADD_PRODUCT_ORDER,\r\n    products: arrProducts,\r\n    total: calculateTotal(arrQuantity)\r\n  };\r\n};\r\n\r\nexport const fetchProductOrder = () => {\r\n  return dispatch => {\r\n    if (localStorage.getItem(\"product\") !== null) {\r\n      let products = localStorage.getItem(\"product\").split(\",\");\r\n      axios({\r\n        method: \"post\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        data: products,\r\n        url: \"http://localhost:8086/products/arr\"\r\n      }).then(res => {\r\n        let quantityLs = localStorage.getItem(\"quantity\").split(\",\");\r\n        let productsState = [...res.data];\r\n        for (let p = 0; p < productsState.length; p++) {\r\n          productsState[p].quantityCart = quantityLs[p];\r\n        }\r\n        dispatch({\r\n          type: actionTypes.FETCH_PRODUCT_ORDER,\r\n          products: productsState,\r\n          total: calculateTotal(quantityLs)\r\n        });\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst calculateTotal = arrQuantity => {\r\n  let total = 0;\r\n  for (let q = 0; q < arrQuantity.length; q++) {\r\n    total += parseInt(arrQuantity[q], 10);\r\n  }\r\n  return total;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}