{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Techbiosis\\\\Desktop\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\Techbiosis\\\\Desktop\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Techbiosis\\\\Desktop\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Techbiosis\\\\Desktop\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Techbiosis\\\\Desktop\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Techbiosis\\\\Desktop\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Techbiosis\\\\Desktop\\\\ecommerce\\\\src\\\\components\\\\CreateProduct\\\\CreateProduct.js\";\nimport React, { Component } from \"react\";\nimport \"./CreateProduct.css\";\nimport axios from \"axios\";\nimport { getCookie } from \"../Util/Util\";\n\nvar CreateProduct =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateProduct, _Component);\n\n  function CreateProduct() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CreateProduct);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CreateProduct)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      categories: {},\n      selectedCategorie: \"\",\n      selectedSubcategorie: \"\",\n      product: {\n        name: \"\",\n        description: \"\",\n        price: 0,\n        quantity: 0,\n        thumbnail: \"\"\n      },\n      attributes: {\n        brand: \"\",\n        color: \"\",\n        weight: \"\",\n        size: \"\"\n      },\n      imageUrl: \"\",\n      imageArr: [],\n      errorAddImage: \"\",\n      errorAddImageFlash: false,\n      error: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(CreateProduct, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var url = \"http://localhost:8086/catalogs/categories\";\n      axios.get(url).then(function (res) {\n        var categories = {};\n\n        for (var i = 0; i < res.data.length; i++) {\n          var categorie = res.data[i].name;\n          categories[categorie] = [];\n\n          for (var r = 0; r < res.data[i].subcategories.length; r++) {\n            categories[categorie].push(res.data[i].subcategories[r].name);\n          }\n        }\n\n        _this2.setState({\n          categories: categories,\n          selectedCategorie: res.data[0].name,\n          selectedSubcategorie: res.data[0].subcategories[0].name\n        });\n      });\n    }\n  }, {\n    key: \"resetFieldsHandler\",\n    value: function resetFieldsHandler() {\n      this.setState({\n        product: {\n          name: \"\",\n          description: \"\",\n          price: 0,\n          quantity: 0,\n          thumbnail: \"\"\n        },\n        imageUrl: \"\",\n        imageArr: []\n      });\n    }\n  }, {\n    key: \"postProductHandler\",\n    value: function postProductHandler() {\n      var _this3 = this;\n\n      var category = this.state.selectedCategorie.toLowerCase().split(' ').join('-');\n      var subcategory = this.state.selectedSubcategorie.toLowerCase().split(' ').join('-');\n      var product = this.state.product.name.toLowerCase().split(' ').join('-'); // Create a product\n\n      axios({\n        method: \"post\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        data: JSON.stringify(this.state.product),\n        url: \"http://localhost:8086/catalogs/categories/\".concat(category, \"/subcategories/\").concat(subcategory, \"/products?session=\").concat(getCookie(\"Session\"))\n      }).then(function (res) {\n        if (res.status === 201) {\n          // Add attributes to a product\n          axios({\n            method: \"post\",\n            headers: {\n              \"content-type\": \"application/json\"\n            },\n            data: JSON.stringify(_this3.state.attributes),\n            url: \"http://localhost:8086/catalogs/categories/\".concat(category, \"/subcategories/\").concat(subcategory, \"/products/\").concat(product, \"/attributes?session=\").concat(getCookie(\"Session\"))\n          }).then(function (res) {\n            if (res.status === 201) {\n              _this3.resetFieldsHandler();\n            }\n          }).catch(function (error) {\n            _this3.setState({\n              error: error.response.data.message\n            });\n          }); // Add images to product\n\n          for (var i = 0; i < _this3.state.imageArr.length; i++) {\n            var url = _this3.state.imageArr[i];\n            axios({\n              method: \"post\",\n              headers: {\n                \"content-type\": \"application/json\"\n              },\n              data: JSON.stringify({\n                url: url\n              }),\n              url: \"http://localhost:8086/catalogs/categories/\".concat(category, \"/subcategories/\").concat(subcategory, \"/products/\").concat(product, \"/images?session=\").concat(getCookie(\"Session\"))\n            }).then(function (res) {\n              if (res.status === 201) {\n                _this3.resetFieldsHandler();\n              }\n            }).catch(function (error) {\n              _this3.setState({\n                error: error.response.data.message\n              });\n            });\n          }\n\n          _this3.resetFieldsHandler();\n        }\n      }).catch(function (error) {\n        _this3.setState({\n          error: error.response.data.message\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"CreateProduct\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"product-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"categories\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Category\"), React.createElement(\"select\", {\n        onChange: function onChange(e) {\n          return _this4.setState({\n            selectedCategorie: e.target.options[e.target.selectedIndex].text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, Object.keys(this.state.categories).map(function (categorie) {\n        return React.createElement(\"option\", {\n          key: categorie,\n          value: categorie,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, categorie);\n      }))), React.createElement(\"div\", {\n        className: \"subcategories\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Subcategory\"), React.createElement(\"select\", {\n        onChange: function onChange(e) {\n          return _this4.setState({\n            selectedSubcategorie: e.target.options[e.target.selectedIndex].text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, this.state.categories[this.state.selectedCategorie] !== undefined ? this.state.categories[this.state.selectedCategorie].map(function (subcategorie) {\n        return React.createElement(\"option\", {\n          key: subcategorie,\n          value: subcategorie,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, subcategorie);\n      }) : null)), React.createElement(\"div\", {\n        className: \"thumbnail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Thumbnail URL:\"), React.createElement(\"input\", {\n        value: this.state.product.thumbnail,\n        type: \"text\",\n        placeholder: \"Thumbnail\",\n        onChange: function onChange(e) {\n          return _this4.setState({\n            product: _objectSpread({}, _this4.state.product, {\n              thumbnail: e.target.value\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Name:\"), React.createElement(\"input\", {\n        value: this.state.product.name,\n        type: \"text\",\n        placeholder: \"Name\",\n        onChange: function onChange(e) {\n          return _this4.setState({\n            product: _objectSpread({}, _this4.state.product, {\n              name: e.target.value\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Price:\"), React.createElement(\"input\", {\n        value: this.state.product.price,\n        type: \"number\",\n        placeholder: \"Price\",\n        onChange: function onChange(e) {\n          return _this4.setState({\n            product: _objectSpread({}, _this4.state.product, {\n              price: e.target.value\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"quantity\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"Quantity:\"), React.createElement(\"input\", {\n        value: this.state.product.quantity,\n        type: \"number\",\n        placeholder: \"Quantity\",\n        onChange: function onChange(e) {\n          return _this4.setState({\n            product: _objectSpread({}, _this4.state.product, {\n              quantity: e.target.value\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"attributes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"brand\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"Brand:\"), React.createElement(\"select\", {\n        value: this.state.attributes.brand,\n        onChange: function onChange(e) {\n          return _this4.setState({\n            attributes: _objectSpread({}, _this4.state.attributes, {\n              brand: e.target.options[e.target.selectedIndex].text\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"All\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"All Brands\"), React.createElement(\"option\", {\n        value: \"Bose\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"Bose\"), React.createElement(\"option\", {\n        value: \"Audio-Technica\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"Audio-Technica\"), React.createElement(\"option\", {\n        value: \"Sennheiser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Sennheiser\"))), React.createElement(\"div\", {\n        className: \"color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"Color:\"), React.createElement(\"select\", {\n        onChange: function onChange(e) {\n          return _this4.setState({\n            attributes: _objectSpread({}, _this4.state.attributes, {\n              color: e.target.options[e.target.selectedIndex].text\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, \"Black\"), React.createElement(\"option\", {\n        value: \"gray\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, \"Gray\"), React.createElement(\"option\", {\n        value: \"blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, \"Blue\"), React.createElement(\"option\", {\n        value: \"green\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \"Green\"), React.createElement(\"option\", {\n        value: \"purple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"Purple\"), React.createElement(\"option\", {\n        value: \"pink\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, \"Pink\"), React.createElement(\"option\", {\n        value: \"yellow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"Yellow\"), React.createElement(\"option\", {\n        value: \"orange\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"Orange\"), React.createElement(\"option\", {\n        value: \"red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, \"Red\"), React.createElement(\"option\", {\n        value: \"brown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"Brown\"), React.createElement(\"option\", {\n        value: \"white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"White\"), React.createElement(\"option\", {\n        value: \"others\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"Others\"))), React.createElement(\"div\", {\n        className: \"weight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"Weight:\"), React.createElement(\"select\", {\n        onChange: function onChange(e) {\n          return _this4.setState({\n            attributes: _objectSpread({}, _this4.state.attributes, {\n              weight: e.target.options[e.target.selectedIndex].text\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, \"Black\"), React.createElement(\"option\", {\n        value: \"gray\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, \"Gray\"))), React.createElement(\"div\", {\n        className: \"size\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, \"Size:\"), React.createElement(\"select\", {\n        onChange: function onChange(e) {\n          return _this4.setState({\n            attributes: _objectSpread({}, _this4.state.attributes, {\n              size: e.target.options[e.target.selectedIndex].text\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"Black\"), React.createElement(\"option\", {\n        value: \"gray\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"Gray\")))), React.createElement(\"div\", {\n        className: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, \"Description:\"), React.createElement(\"textarea\", {\n        type: \"text\",\n        placeholder: \"Description\",\n        value: this.state.product.description,\n        onChange: function onChange(e) {\n          return _this4.setState({\n            product: _objectSpread({}, _this4.state.product, {\n              description: e.target.value\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"images\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, \"Image Url:\"), React.createElement(\"div\", {\n        className: \"image-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: function onChange(e) {\n          return _this4.setState({\n            imageUrl: e.target.value\n          });\n        },\n        value: this.state.imageUrl,\n        type: \"text\",\n        placeholder: \"Image URL\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        onClick: function onClick() {\n          if (_this4.state.imageUrl !== \"\") {\n            if (_this4.state.imageArr.indexOf(_this4.state.imageUrl) === -1) {\n              _this4.state.imageArr.push(_this4.state.imageUrl);\n\n              _this4.setState({\n                errorAddImage: \"\",\n                imageUrl: \"\"\n              });\n            } else {\n              _this4.setState({\n                errorAddImage: \"Duplicate Urls.\",\n                errorAddImageFlash: true\n              });\n            }\n          } else {\n            _this4.setState({\n              errorAddImage: \"Invalid Url.\",\n              errorAddImageFlash: true\n            });\n          }\n        },\n        className: \"fas fa-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        style: {\n          visibility: this.state.errorAddImage !== \"\" ? \"visible\" : \"hidden\"\n        },\n        onAnimationEnd: function onAnimationEnd() {\n          return _this4.setState({\n            errorAddImageFlash: false\n          });\n        },\n        className: this.state.errorAddImageFlash ? \"error flash\" : \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, this.state.errorAddImage)), React.createElement(\"div\", {\n        className: \"image-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, this.state.imageArr.map(function (url) {\n        return React.createElement(\"div\", {\n          className: \"image-url\",\n          key: url,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 362\n          },\n          __self: this\n        }, url, React.createElement(\"i\", {\n          className: \"fas fa-times\",\n          onClick: function onClick() {\n            var imageArr = _this4.state.imageArr;\n            imageArr.splice(imageArr.indexOf(url), 1);\n\n            _this4.setState({\n              imageArr: imageArr\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 364\n          },\n          __self: this\n        }));\n      })), React.createElement(\"div\", {\n        className: \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"submit\",\n        onClick: function onClick() {\n          _this4.postProductHandler();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, \"Submit\"), React.createElement(\"button\", {\n        className: \"reset\",\n        onClick: function onClick() {\n          return _this4.resetFieldsHandler();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, \"Reset\"), React.createElement(\"button\", {\n        className: \"cancel\",\n        onClick: function onClick() {\n          return _this4.props.history.push({\n            pathname: \"/\"\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, \"Cancel\"))));\n    }\n  }]);\n\n  return CreateProduct;\n}(Component);\n\nexport { CreateProduct as default };","map":{"version":3,"sources":["C:\\Users\\Techbiosis\\Desktop\\ecommerce\\src\\components\\CreateProduct\\CreateProduct.js"],"names":["React","Component","axios","getCookie","CreateProduct","state","categories","selectedCategorie","selectedSubcategorie","product","name","description","price","quantity","thumbnail","attributes","brand","color","weight","size","imageUrl","imageArr","errorAddImage","errorAddImageFlash","error","url","get","then","res","i","data","length","categorie","r","subcategories","push","setState","category","toLowerCase","split","join","subcategory","method","headers","JSON","stringify","status","resetFieldsHandler","catch","response","message","e","target","options","selectedIndex","text","Object","keys","map","undefined","subcategorie","value","indexOf","visibility","splice","postProductHandler","props","history","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./CreateProduct.css\";\r\nimport axios from \"axios\";\r\nimport { getCookie } from \"../Util/Util\";\r\n\r\nexport default class CreateProduct extends Component {\r\n  state = {\r\n    categories: {},\r\n    selectedCategorie: \"\",\r\n    selectedSubcategorie: \"\",\r\n    product: {\r\n      name: \"\",\r\n      description: \"\",\r\n      price: 0,\r\n      quantity: 0,\r\n      thumbnail: \"\"\r\n    },\r\n    attributes: {\r\n      brand: \"\",\r\n      color: \"\",\r\n      weight: \"\",\r\n      size: \"\"\r\n    },\r\n    imageUrl: \"\",\r\n    imageArr: [],\r\n    errorAddImage: \"\",\r\n    errorAddImageFlash: false,\r\n    error: \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    let url = `http://localhost:8086/catalogs/categories`;\r\n    axios.get(url).then(res => {\r\n      let categories = {};\r\n      for (let i = 0; i < res.data.length; i++) {\r\n        let categorie = res.data[i].name;\r\n        categories[categorie] = [];\r\n        for (let r = 0; r < res.data[i].subcategories.length; r++) {\r\n          categories[categorie].push(res.data[i].subcategories[r].name);\r\n        }\r\n      }\r\n      this.setState({\r\n        categories: categories,\r\n        selectedCategorie: res.data[0].name,\r\n        selectedSubcategorie: res.data[0].subcategories[0].name\r\n      });\r\n    });\r\n  }\r\n  resetFieldsHandler() {\r\n    this.setState({\r\n      product: {\r\n        name: \"\",\r\n        description: \"\",\r\n        price: 0,\r\n        quantity: 0,\r\n        thumbnail: \"\"\r\n      },\r\n      imageUrl: \"\",\r\n      imageArr: []\r\n    });\r\n  }\r\n\r\n  postProductHandler() {\r\n    let category = this.state.selectedCategorie.toLowerCase().split(' ').join('-');\r\n    let subcategory = this.state.selectedSubcategorie.toLowerCase().split(' ').join('-');\r\n    let product = this.state.product.name.toLowerCase().split(' ').join('-');\r\n    // Create a product\r\n    axios({\r\n      method: \"post\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      data: JSON.stringify(this.state.product),\r\n      url: `http://localhost:8086/catalogs/categories/${category}/subcategories/${subcategory}/products?session=${getCookie(\r\n        \"Session\"\r\n      )}`\r\n    })\r\n      .then(res => {\r\n        if (res.status === 201) {\r\n          // Add attributes to a product\r\n          axios({\r\n            method: \"post\",\r\n            headers: { \"content-type\": \"application/json\" },\r\n            data: JSON.stringify(this.state.attributes),\r\n            url: `http://localhost:8086/catalogs/categories/${category}/subcategories/${subcategory}/products/${product}/attributes?session=${getCookie(\r\n              \"Session\"\r\n            )}`\r\n          })\r\n            .then(res => {\r\n              if (res.status === 201) {\r\n                this.resetFieldsHandler();\r\n              }\r\n            })\r\n            .catch(error => {\r\n              this.setState({ error: error.response.data.message });\r\n            });\r\n          // Add images to product\r\n          for (let i = 0; i < this.state.imageArr.length; i++) {\r\n            let url = this.state.imageArr[i];\r\n            axios({\r\n              method: \"post\",\r\n              headers: { \"content-type\": \"application/json\" },\r\n              data: JSON.stringify({ url: url }),\r\n              url: `http://localhost:8086/catalogs/categories/${category}/subcategories/${subcategory}/products/${product}/images?session=${getCookie(\r\n                \"Session\"\r\n              )}`\r\n            })\r\n              .then(res => {\r\n                if (res.status === 201) {\r\n                  this.resetFieldsHandler();\r\n                }\r\n              })\r\n              .catch(error => {\r\n                this.setState({ error: error.response.data.message });\r\n              });\r\n          }\r\n          this.resetFieldsHandler();\r\n\r\n        }\r\n      })\r\n      .catch(error => {\r\n        this.setState({ error: error.response.data.message });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"CreateProduct\">\r\n        <div className=\"product-wrapper\">\r\n          <div className=\"categories\">\r\n            <p className=\"label\">Category</p>\r\n            <select\r\n              onChange={e =>\r\n                this.setState({\r\n                  selectedCategorie:\r\n                    e.target.options[e.target.selectedIndex].text\r\n                })\r\n              }\r\n            >\r\n              {Object.keys(this.state.categories).map(categorie => (\r\n                <option key={categorie} value={categorie}>\r\n                  {categorie}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"subcategories\">\r\n            <p className=\"label\">Subcategory</p>\r\n            <select\r\n              onChange={e =>\r\n                this.setState({\r\n                  selectedSubcategorie:\r\n                    e.target.options[e.target.selectedIndex].text\r\n                })\r\n              }\r\n            >\r\n              {this.state.categories[this.state.selectedCategorie] !== undefined\r\n                ? this.state.categories[this.state.selectedCategorie].map(\r\n                  subcategorie => (\r\n                    <option key={subcategorie} value={subcategorie}>\r\n                      {subcategorie}\r\n                    </option>\r\n                  )\r\n                )\r\n                : null}\r\n            </select>\r\n          </div>\r\n          <div className=\"thumbnail\">\r\n            <p className=\"label\">Thumbnail URL:</p>\r\n            <input\r\n              value={this.state.product.thumbnail}\r\n              type=\"text\"\r\n              placeholder=\"Thumbnail\"\r\n              onChange={e =>\r\n                this.setState({\r\n                  product: {\r\n                    ...this.state.product,\r\n                    thumbnail: e.target.value\r\n                  }\r\n                })\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"name\">\r\n            <p className=\"label\">Name:</p>\r\n            <input\r\n              value={this.state.product.name}\r\n              type=\"text\"\r\n              placeholder=\"Name\"\r\n              onChange={e =>\r\n                this.setState({\r\n                  product: {\r\n                    ...this.state.product,\r\n                    name: e.target.value\r\n                  }\r\n                })\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"price\">\r\n            <p className=\"label\">Price:</p>\r\n            <input\r\n              value={this.state.product.price}\r\n              type=\"number\"\r\n              placeholder=\"Price\"\r\n              onChange={e =>\r\n                this.setState({\r\n                  product: {\r\n                    ...this.state.product,\r\n                    price: e.target.value\r\n                  }\r\n                })\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"quantity\">\r\n            <p className=\"label\">Quantity:</p>\r\n            <input\r\n              value={this.state.product.quantity}\r\n              type=\"number\"\r\n              placeholder=\"Quantity\"\r\n              onChange={e =>\r\n                this.setState({\r\n                  product: {\r\n                    ...this.state.product,\r\n                    quantity: e.target.value\r\n                  }\r\n                })\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"attributes\">\r\n            <div className=\"brand\">\r\n              <p className=\"label\">Brand:</p>\r\n              <select\r\n              value={ this.state.attributes.brand }\r\n                onChange={e =>\r\n                  this.setState({\r\n                    attributes: {\r\n                      ...this.state.attributes,\r\n                      brand: e.target.options[e.target.selectedIndex].text\r\n                    }\r\n                  })\r\n                }\r\n              >\r\n                <option value=\"All\">All Brands</option>\r\n                <option value=\"Bose\">Bose</option>\r\n                <option value=\"Audio-Technica\">Audio-Technica</option>\r\n                <option value=\"Sennheiser\">Sennheiser</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"color\">\r\n              <p className=\"label\">Color:</p>\r\n              <select\r\n                onChange={e =>\r\n                  this.setState({\r\n                    attributes: {\r\n                      ...this.state.attributes,\r\n                      color: e.target.options[e.target.selectedIndex].text\r\n                    }\r\n                  })\r\n                }\r\n              >\r\n                <option value=\"black\">Black</option>\r\n                <option value=\"gray\">Gray</option>\r\n                <option value=\"blue\">Blue</option>\r\n                <option value=\"green\">Green</option>\r\n                <option value=\"purple\">Purple</option>\r\n                <option value=\"pink\">Pink</option>\r\n                <option value=\"yellow\">Yellow</option>\r\n                <option value=\"orange\">Orange</option>\r\n                <option value=\"red\">Red</option>\r\n                <option value=\"brown\">Brown</option>\r\n                <option value=\"white\">White</option>\r\n                <option value=\"others\">Others</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"weight\">\r\n              <p className=\"label\">Weight:</p>\r\n              <select\r\n                onChange={e =>\r\n                  this.setState({\r\n                    attributes: {\r\n                      ...this.state.attributes,\r\n                      weight: e.target.options[e.target.selectedIndex].text\r\n                    }\r\n                  })\r\n                }\r\n              >\r\n                <option value=\"black\">Black</option>\r\n                <option value=\"gray\">Gray</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"size\">\r\n              <p className=\"label\">Size:</p>\r\n              <select\r\n                onChange={e =>\r\n                  this.setState({\r\n                    attributes: {\r\n                      ...this.state.attributes,\r\n                      size: e.target.options[e.target.selectedIndex].text\r\n                    }\r\n                  })\r\n                }\r\n              >\r\n                <option value=\"black\">Black</option>\r\n                <option value=\"gray\">Gray</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"description\">\r\n            <p className=\"label\">Description:</p>\r\n            <textarea\r\n              type=\"text\"\r\n              placeholder=\"Description\"\r\n              value={this.state.product.description}\r\n              onChange={e =>\r\n                this.setState({\r\n                  product: {\r\n                    ...this.state.product,\r\n                    description: e.target.value\r\n                  }\r\n                })\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"images\">\r\n            <p className=\"label\">Image Url:</p>\r\n            <div className=\"image-wrapper\">\r\n              <input\r\n                onChange={e => this.setState({ imageUrl: e.target.value })}\r\n                value={this.state.imageUrl}\r\n                type=\"text\"\r\n                placeholder=\"Image URL\"\r\n              />\r\n              <i\r\n                onClick={() => {\r\n                  if (this.state.imageUrl !== \"\") {\r\n                    if (this.state.imageArr.indexOf(this.state.imageUrl) === -1) {\r\n                      this.state.imageArr.push(this.state.imageUrl);\r\n                      this.setState({ errorAddImage: \"\", imageUrl: \"\" });\r\n                    } else {\r\n                      this.setState({ errorAddImage: \"Duplicate Urls.\", errorAddImageFlash: true })\r\n                    }\r\n                  } else {\r\n                    this.setState({ errorAddImage: \"Invalid Url.\", errorAddImageFlash: true })\r\n                  }\r\n                }}\r\n                className=\"fas fa-plus\"\r\n              />\r\n            </div>\r\n            <p\r\n              style={{\r\n                visibility:\r\n                  this.state.errorAddImage !== \"\"\r\n                    ? \"visible\"\r\n                    : \"hidden\"\r\n              }}\r\n              onAnimationEnd={() => this.setState({ errorAddImageFlash: false })}\r\n              className={this.state.errorAddImageFlash ? \"error flash\" : \"error\"}>{this.state.errorAddImage}</p>\r\n          </div>\r\n          <div className=\"image-list\">\r\n            {this.state.imageArr.map(url => (\r\n              <div className=\"image-url\" key={url}>\r\n                {url}\r\n                <i\r\n                  className=\"fas fa-times\"\r\n                  onClick={() => {\r\n                    let imageArr = this.state.imageArr;\r\n                    imageArr.splice(imageArr.indexOf(url), 1);\r\n                    this.setState({ imageArr: imageArr });\r\n                  }}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"buttons\">\r\n            <button className=\"submit\" onClick={() => {\r\n              this.postProductHandler()\r\n            }}>\r\n              Submit\r\n            </button>\r\n            <button className=\"reset\" onClick={() => this.resetFieldsHandler()}>\r\n              Reset\r\n            </button>\r\n            <button\r\n              className=\"cancel\"\r\n              onClick={() => this.props.history.push({ pathname: \"/\" })}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}