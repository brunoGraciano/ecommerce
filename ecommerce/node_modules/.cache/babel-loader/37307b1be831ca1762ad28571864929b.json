{"ast":null,"code":"import * as actionTypes from \"./actionTypes\";\nimport axios from \"axios\";\nexport var removeProductOrder = function removeProductOrder(productId) {\n  var productsLs = localStorage.getItem(\"product\").split(\",\");\n  var quantityLs = localStorage.getItem(\"quantity\").split(\",\");\n  var index = productsLs.indexOf(productId);\n\n  if (quantityLs[index] === 1) {\n    quantityLs.splice(index, 1);\n    productsLs.splice(index, 1);\n    localStorage.setItem(\"quantity\", quantityLs);\n    localStorage.setItem(\"product\", productsLs);\n  } else {\n    quantityLs[index] = quantityLs[index] - 1;\n    localStorage.setItem(\"quantity\", quantityLs);\n  }\n\n  return {\n    type: actionTypes.REMOVE_PRODUCT_ORDER,\n    products: productsLs,\n    quantity: quantityLs\n  };\n};\nexport var addProductOrder = function addProductOrder(productId) {\n  var products = localStorage.getItem(\"product\");\n  var quantity = localStorage.getItem(\"quantity\");\n  var arrProducts = [];\n  var arrQuantity = [];\n\n  if (products !== null && products !== \"\") {\n    arrProducts = products.split(\",\");\n    arrQuantity = quantity.split(\",\");\n\n    if (arrProducts.indexOf(productId) === -1) {\n      arrProducts.push(productId);\n      arrQuantity.push(1);\n    } else {\n      var indexOfProduct = arrProducts.indexOf(productId);\n      var prevQuantity = parseInt(arrQuantity[indexOfProduct], 10) + 1;\n      arrQuantity[indexOfProduct] = prevQuantity;\n    }\n  } else {\n    arrProducts = [productId];\n    arrQuantity = [1];\n  }\n\n  localStorage.setItem(\"product\", arrProducts);\n  localStorage.setItem(\"quantity\", arrQuantity);\n  return {\n    type: actionTypes.ADD_PRODUCT_ORDER,\n    products: arrProducts,\n    quantity: arrQuantity\n  };\n};\nexport var fetchProductOrder = function fetchProductOrder() {\n  return function (dispatch) {\n    if (localStorage.getItem(\"product\") !== null) {\n      var products = localStorage.getItem(\"product\").split(\",\");\n      axios({\n        method: \"post\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        data: products,\n        url: \"http://localhost:8086/products/arr\"\n      }).then(function (res) {\n        var quantityLs = localStorage.getItem(\"quantity\").split(\",\");\n        dispatch({\n          type: actionTypes.FETCH_PRODUCT_ORDER,\n          products: res.data,\n          quantity: calculateTotal(quantityLs)\n        });\n      });\n    }\n  };\n};\n\nvar calculateTotal = function calculateTotal(arrQuantity) {\n  var total = 0;\n\n  for (var q = 0; q < arrQuantity.length; q++) {\n    total += arrQuantity[q];\n  }\n\n  return total;\n};","map":{"version":3,"sources":["C:\\Users\\bruno\\desktop\\ecommerce\\src\\store\\actions\\orderAction.js"],"names":["actionTypes","axios","removeProductOrder","productId","productsLs","localStorage","getItem","split","quantityLs","index","indexOf","splice","setItem","type","REMOVE_PRODUCT_ORDER","products","quantity","addProductOrder","arrProducts","arrQuantity","push","indexOfProduct","prevQuantity","parseInt","ADD_PRODUCT_ORDER","fetchProductOrder","dispatch","method","headers","data","url","then","res","FETCH_PRODUCT_ORDER","calculateTotal","total","q","length"],"mappings":"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","sourcesContent":["import * as actionTypes from \"./actionTypes\";\r\nimport axios from \"axios\";\r\n\r\nexport const removeProductOrder = productId => {\r\n  let productsLs = localStorage.getItem(\"product\").split(\",\");\r\n  let quantityLs = localStorage.getItem(\"quantity\").split(\",\");\r\n  const index = productsLs.indexOf(productId);\r\n  if (quantityLs[index] === 1) {\r\n    quantityLs.splice(index, 1);\r\n    productsLs.splice(index, 1);\r\n    localStorage.setItem(\"quantity\", quantityLs);\r\n    localStorage.setItem(\"product\", productsLs);\r\n  } else {\r\n    quantityLs[index] = quantityLs[index] - 1;\r\n    localStorage.setItem(\"quantity\", quantityLs);\r\n  }\r\n  return {\r\n    type: actionTypes.REMOVE_PRODUCT_ORDER,\r\n    products: productsLs,\r\n    quantity: quantityLs\r\n  };\r\n};\r\n\r\nexport const addProductOrder = productId => {\r\n  let products = localStorage.getItem(\"product\");\r\n  let quantity = localStorage.getItem(\"quantity\");\r\n  let arrProducts = [];\r\n  let arrQuantity = [];\r\n  if (products !== null && products !== \"\") {\r\n    arrProducts = products.split(\",\");\r\n    arrQuantity = quantity.split(\",\");\r\n    if (arrProducts.indexOf(productId) === -1) {\r\n      arrProducts.push(productId);\r\n      arrQuantity.push(1);\r\n    } else {\r\n      const indexOfProduct = arrProducts.indexOf(productId);\r\n      let prevQuantity = parseInt(arrQuantity[indexOfProduct], 10) + 1;\r\n      arrQuantity[indexOfProduct] = prevQuantity;\r\n    }\r\n  } else {\r\n    arrProducts = [productId];\r\n    arrQuantity = [1];\r\n  }\r\n  localStorage.setItem(\"product\", arrProducts);\r\n  localStorage.setItem(\"quantity\", arrQuantity);\r\n  return {\r\n    type: actionTypes.ADD_PRODUCT_ORDER,\r\n    products: arrProducts,\r\n    quantity: arrQuantity\r\n  };\r\n};\r\n\r\nexport const fetchProductOrder = () => {\r\n  return dispatch => {\r\n    if (localStorage.getItem(\"product\") !== null) {\r\n      let products = localStorage.getItem(\"product\").split(\",\");\r\n      axios({\r\n        method: \"post\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        data: products,\r\n        url: \"http://localhost:8086/products/arr\"\r\n      }).then(res => {\r\n        let quantityLs = localStorage.getItem(\"quantity\").split(\",\");\r\n        dispatch({\r\n          type: actionTypes.FETCH_PRODUCT_ORDER,\r\n          products: res.data,\r\n          quantity: calculateTotal(quantityLs)\r\n        });\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst calculateTotal = arrQuantity => {\r\n  let total = 0;\r\n  for (let q = 0; q < arrQuantity.length; q++) {\r\n    total += arrQuantity[q];\r\n  }\r\n  return total;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}